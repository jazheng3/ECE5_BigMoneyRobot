<!doctype html>

<html lang="en">

  <head>
    <meta charset="utf-8">
    <title>ECE5 Lab 4</title> 
    <meta name="description" content="sketchbook">
    <meta name="author" content="sketchbook">
    <link rel="stylesheet" href="style.css"> <!-- this imports the CSS file. do not remove -->
  </head>

  <body>
    
<!--   *********************  HEADING START *********************   --> 
    
    <div class="heading">
      <h3 class='name'>James / Zheng <br> Khoa / Nguyen <br> Lucas / Wang <br> Yusuf / Amanullah</h3> 
            
      <h1>Team Cheerios Website</h1> <!-- h1 is heading 1 -->
    </div>
    
<!--   *********************  HEADING END *********************   --> 
    
<!--   ////////////////////////////////////////////////////////////////////////////////////////////////   --> 


<!--   *********************  INTRO START *********************   --> 
    
    <section class="main">
      <h2> Objective</h2>
      <p1>The objective of lab 4 was to combine the skills learned throughout the course, including Arduino coding, circuit design, 3D modeling and printing, soldering, and input processing, to create a robot that can follow a black line.</p1> 
             
      <br><br>
<!--   *********************  INTRO END *********************   --> 
      
<!--   ////////////////////////////////////////////////////////////////////////////////////////////////   --> 
 
      
<!--   *********************  BUTTONS START *********************   -->
      
<!----------------------------------------  BUTTON 1 ---------------------------------------->
      
      <div class='center'>
        <button type='button' onclick="toggleText1()" class="btn">Challenge 1A/1B: Photoresistors and Potentiometers Circuits</button>
      </div> <!--end of div class center -->
      
      <div class="interactive" id='interactive1' style='display: none'>
        <div class='box1'>
          <br>
            <img src = 'https://lh3.googleusercontent.com/4QSaNvAtvonpkazhjnWcMvMsWkGzwgC3JyyvtuG9xCq29BoPq9SUCtA8ptSgjnUiB9OUsx1ZVX8vX_Z3CKefdHRW-JSTEJf8DWr66hNi0a-kC2JcyykIPfJ3uBdyQ2HOzKfzTc6z=w600' class='imgmar'>
            <img src = 'https://lh3.googleusercontent.com/5_4idexKpIZmRt_U0AK9cyNYSua4O-qppJQHYEUcKja6uSl-EXYzgA-ecBoxPhfUnJ8IUzHJxJkc_19WwPpu81I5rGGrVLOfAKg7twiZox_YKAp-kEVWF1jE6Wl4znljcHLmzy3V=w600' class='imgmar'>
            <br>
            <img src = 'https://lh3.googleusercontent.com/EKP_XIfCARiI2xZCr18Cglg63uFXeJxh_8WfmHRi_Po4ikdT6b3Bt__ElUZbDWMLLGc_dluqZc_nzFtnzDpUv_Eh9DN6pTekg5g7mq2OazII6boXqUJeRYf9U3gdRn8Me6r1IQAReg=w240' class='imgmar'>
            <img src = 'https://lh3.googleusercontent.com/u3QdoCSl51WVDvYQ4JndZL14TH4e1kQh68cFqKG2tGnvXg1fzqREfnrIY-SvNIDSR_HZJxw4Se7BKXdg_sHqlAQSRocUa1vITZtbQZutA4MMP7ahD3EDOSQ4Il7olNGrYC8xDo0F1w=w240' class='imgmar'>
            <!-- to insert image replace the link to the image of choice ** note: keep the quotations -->
            <br>
            <p2>Breadboarded potentiometers <br> 
              Breadboarded photoresistors</p2>
            <br><br>
         
          <p class='box2'>
             Our potentiometer gave out readings between 0 and 1023 when we turned the potentiometers in a clockwise direction. We could change the direction we needed turn to increase readings by switching the polarity of the potentiometers. This was as simple as flipping the potentiometer around when we put it into the breadboard.
            <br><br><br> 
             Without a light shield installed, our photoresistors gave out values of 750-850 on the black surface and 650-700 for the white surface, on a scale of 0-1023. The external light sources artificially decreased the reading values, while shadows increased it. However, this isn't guaranteed as the angle of light and shadow can affect different photoresistors differently.
          </p> <!-- p is paragraph -->
        </div> <!-- This is the end of div box1 -->
      </div> <!-- This is the end of div interactive -->
<!----------------------------------------  BUTTON 3 ---------------------------------------->
      
      <div class ='center'>
        <button type='button' onclick="toggleText3()" class="btn">Challenge 1C: Motor Driver</button>
      </div> <!--end of div class center -->
      
      <div class="interactive" id='interactive3' style='display: none'>
        <div class='box1'>
          <br>
          
            <img src = 'https://lh3.googleusercontent.com/7YdpZ0yD7ONgtjrGndNWb7Ju5l1C5XI_5XeNyEDIqSqijaUI6f-UHV-8kaYQ8-232N-mIbd5sJ24DQ22ZSMbwfCIQTwAx6sYI5oFQm97Ap9J22gdpzZQxqXSVbsGBdwpz1FT5rOnnQ=w240'class='imgmar'>
            <img src = 'https://lh3.googleusercontent.com/fH8AlXODG2k6qmUf9MD4GfVYO1SB4iZ7V0r1JqUQLsHFCeFLAA4_q4vfNT0l3x4OMThd1O2uDA9le4fJZQWYuUpRnw7nVaC77dqaa0ldHDQtgle1Kg8jJWsbH-9x6BpAsZFgAxxy1Q=w240' class='imgmar'>
            <!-- to insert image replace the link to the image of choice ** note: keep the quotations -->
            <br>
            <p2>Picture of vehicle including chassis, wheels, motors, and caster <br> 
              Soldered motor shield connected to an Arduino Mega</p2>
            <br><br>
          
          <p class='box2'>
            The purpose of the motor driver is to prevent all the power to be given to the motors and not to the other robot parts like the potentiometers. The motor driver allows the Arduino to be powered by a 5 volt battery and give out commands to the robot, while enabling a 9 volt battery to power the motors instead.
          </p> <!-- p is paragraph -->
        </div> <!-- This is the end of div interactive -->
      </div> <!-- This is the end of div box1 -->      
<!----------------------------------------  BUTTON 2 ---------------------------------------->
        
      <div class ='center'> <!-- we put the buton in a container to center it -->
        <button type='button' onclick="toggleText2()" class="btn">Challenge 1D: Chassis Modifications</button>
      </div> <!--end of div class center -->
      
      <div class="interactive" id='interactive2' style='display: none'>
        <div class='box1'>
          <br>
          
            <img src = 'https://lh3.googleusercontent.com/N2efZZpIvXwJ4_MdkRMeBjy7hs52Z-dgSNC3MQMbAbER2YH57Cs4c7ryxPhJA-xz-1sMv29Oo8iuLElsybFHXS9sUpKYtBSWvcLgVWNtjDZBYbkfuurcSd-OveEciIryqdN9nlvzDw=w2400' class='imgmar'>
            <img src = 'https://www.pm10inc.com/wp-content/themes/micron/images/placeholders/ninzio_slider_placeholder.png' class='imgmar'>
            <!-- to insert image replace the link to the image of choice ** note: keep the quotations -->
            <br>
            <p2>STL file of battery holder in Solidworks <br> 
              Battery holder attached to the back of the robot</p2>
            <br><br>
          
          <p class='box2'>
            <br><br>
           The first modification we made was the addition a light shield to the robot. Since we placed our photoresistors directly under the robot chassis on a protoboard, our light shield consisted of two strips of cardboard hot-glued to the sides of the chassis, and some masking tape along the front of the chassis. The light shield prevents external sources of lighting from interfering with our photoresistor readings, allowing for greater accuracy. Prior to our final design, our photoresistors were connected to a breadboard placed in front of the robot. With this design, we used a cardboard light shield that completely enclosed the front of the robot. We moved away from this design because we found that the robot had difficulty completing the frequency sweep track with the photoresistors placed in front of the robot.
            
         <br><br>
         The second modification was the addition of a 3D printed case for the battery holders, designed in Solidworks. With the case, the battery holder can be put in place without the need for zip ties, and gives the robot an overall cleaner design.
    
          </p> <!-- p is paragraph -->
        </div> <!-- This is the end of div interactive -->
      </div> <!-- This is the end of div box1 -->
      

      
<!----------------------------------------  BUTTON 4 ----------------------------------------> 
      
      <div class ='center'>
        <button type='button' onclick="toggleText4()" class="btn">Challenge 3A: Calibration</button>
      </div> <!--end of div class center -->
            
      <div class="interactive" id='interactive4' style='display: none'>
        <div class='box1'>
          <br>
          
            <img src = 'https://lh3.googleusercontent.com/QPA_cIYOktRCD19MVaG8MRZjGoRjW7HHcjZtoXFzB8eeeXHtr3Mh_xqhWRLeCWIb4Ix8fcepZdANwRWcB0glQp4USONH1V9Z_90CPyYNNcVmCSSKElU3tllXTE7a2RCuZ6D49wMtZg=w240' class='imgmar'>
            <!-- to insert image replace the link to the image of choice ** note: keep the quotations -->
            <br>
           <br><br>
          
          <p class='box2'>
            Challenge #7: Explain why you need to calibrate your photoresistor values. 
            What problem does this help solve and what problems do you still see coming from your photoresistors?  
            <br><br>
            We needed to calibrate the photoresistor values to account for fluctuations and variations in expected photoresistor reading values, which may be caused by interfering external light, photoresistor misalignment, etc. One problem we stil faced even after calibration is external light interference affecting photoresistor values, which we were able to fix by adjusting our custom light shield.
          </p> <!-- p is paragraph -->
        </div> <!-- This is the end of div interactive -->
      </div> <!-- This is the end of div box1 -->
      
<!----------------------------------------  BUTTON 5 ---------------------------------------->
      
      <div class ='center'>
        <button type='button' onclick="toggleText5()" class="btn">Challenge 3: PID Control</button>
      </div> <!--end of div class center -->
            
      <div class="interactive" id='interactive5' style='display: none'>
        <div class='box1'>
          <br>
          
            <img src = 'https://lh3.googleusercontent.com/s4V_PcP3_BNt2auuyF0BCZmW42dGiMdfcwzTcMW3Ubq3Ejb11w7EQ9dUHmsUdMLfuef8y8TA5EotMYDAcMo-JX72ZphIFL4WgDeJD9C828sd97Yb3SWTtx9WwiOfsrdbDUGr-xMo1g=w2400' class='imgmar'>
            <!-- to insert image replace the link to the image of choice ** note: keep the quotations -->
            <br>
          <br><br> 
          
          <p class='box2'>
            <br><br>
           P stands for proportional control, and it scales the error value by a proportional gain factor, which gives a turn rate that allows the robot to align itself back on the line after calculating an error. I is the integral, which gives us the cumulative sum previous of errors and can help us correct for small but consistent errors. D, the derivative, checks for the change between errors and whether the the error is increasing or decreasing, which helps us account for sharp and sudden turns. We settled on the values of 15:10:10 because we figured out through experimentation that we didn't need high PID values to navigate the relatively simple and straightforward loop track. Therfore, we went with low PID values and a high speed to allow us to get the fastest possible results, although we will need to change this approach with other types of tracks.
            <br><br>
            What was the best PID values that you used? How well did this track? Any limitations?
            <br><br>
            For the first seeding seeding round, we settled on a value of 15 for P, 10 for I, and 10 for D. With these values, we were able to complete 10 laps on the circuit seeding track in 1 minute.
            <br><br>
            After we modified the robot and moved the photoresistors under the chassis, we tested new SPID values with each of the different competitions tracks and settled on the values with the most reliable results. For the circuit track, we went with S,P,I,D values of 41, 14, 0, and 5. For the drag race, the values were 53, 22, 0, 42. For the frequency sweep, the values were 53, 22, 0, 42. (At the time of the competition, we slightly adjusted the values depending on the situation, but overall these were the most stable values).
            <br><br>

          </p> <!-- p is paragraph -->
        </div> <!-- This is the end of div interactive -->
      </div> <!-- This is the end of div box1 -->
      
<!----------------------------------------  BUTTON 6 ---------------------------------------->
      
      <div class ='center'>
        <button type='button' onclick="toggleText6()" class="btn">Videos</button>
      </div> <!--end of div class center -->
      
      <div class="interactive" id='interactive6' style='display: none'>
        <div class='box1'>
          <br>
          <p class='box2'>
            Video of robot with initial design, just prior to the first seeding round
          </p> <!-- p is paragraph -->
          <iframe width="420" height="315" src="https://www.youtube.com/embed/LorprjG8u1s"> </iframe>
            <br>
        </div> <!-- This is the end of div interactive -->
      </div> <!-- This is the end of div box1 -->
      
<!--   *********************  BUTTONS END *********************   --> 
      
<!--   ////////////////////////////////////////////////////////////////////////////////////////////////   --> 
      
    </section>
    <!-- This is the end of our section -->

  </body>
  
<!--   ////////////////////////////////////////////////////////////////////////////////////////////////   --> 

<!--   *********************  JAVASCRIPT CODE *********************   -->
  
  <script>
    function toggleText1(text) {
      var text = document.getElementById("interactive1");
      if (text.style.display === "none") {
        text.style.display = "block";
      } else {
        text.style.display = "none";
      }
    }


    function toggleText2(text) {
      var text = document.getElementById("interactive2");
      if (text.style.display === "none") {
        text.style.display = "block";
      } else {
        text.style.display = "none";
      }
    }

    function toggleText3(text) {
      var text = document.getElementById("interactive3");
      if (text.style.display === "none") {
        text.style.display = "block";
      } else {
        text.style.display = "none";
      }
    }

    function toggleText4(text) {
      var text = document.getElementById("interactive4");
      if (text.style.display === "none") {
        text.style.display = "block";
      } else {
        text.style.display = "none";
      }
    }
    
    function toggleText5(text) {
      var text = document.getElementById("interactive5");
      if (text.style.display === "none") {
        text.style.display = "block";
      } else {
        text.style.display = "none";
      }
    }
    
    function toggleText6(text) {
      var text = document.getElementById("interactive6");
      if (text.style.display === "none") {
        text.style.display = "block";
      } else {
        text.style.display = "none";
      }
    }

  </script>

</html>


<!--add poster (outside) and video tabs / tab of team photo, tab of team logo-->
